<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SISTEMA DOK 85 - PRODUÇÃO</title>
    <style>
        :root { --gold: #d4af37; --bg: #000; --card: #121212; --text: #eee; }
        * { box-sizing: border-box; font-family: sans-serif; -webkit-tap-highlight-color: transparent; }
        body { background: var(--bg); color: var(--text); margin: 0; padding-bottom: 50px; }
        .header { background: #000; padding: 15px; text-align: center; border-bottom: 2px solid var(--gold); position: sticky; top: 0; z-index: 1000; }
        .status-bar { background: #1a1a1a; color: #27ae60; padding: 8px; text-align: center; font-size: 11px; font-weight: bold; border-bottom: 1px solid #333; }
        .tabs { display: flex; overflow-x: auto; gap: 8px; padding: 10px; background: #0a0a0a; position: sticky; top: 54px; z-index: 999; border-bottom: 1px solid #222; scrollbar-width: none; }
        .tabs::-webkit-scrollbar { display: none; }
        .tab-btn { background: #1a1a1a; color: var(--gold); border: 1px solid var(--gold); padding: 8px 16px; border-radius: 20px; white-space: nowrap; font-size: 10px; font-weight: bold; cursor: pointer; text-transform: uppercase; }
        .tab-btn.active { background: var(--gold); color: #000; }
        .container { padding: 12px; display: flex; flex-direction: column; gap: 8px; }
        .item-row { background: var(--card); border-radius: 10px; border: 1px solid #222; padding: 15px; display: flex; justify-content: space-between; align-items: center; }
        .info b { display: block; font-size: 14px; color: var(--gold); text-transform: uppercase; }
        .info span { font-size: 12px; color: #888; }
        .price { font-size: 19px; font-weight: 900; color: #fff; margin-left: 10px; }
        .vazio { color: #e74c3c !important; } /* Alerta de Vácuo */
    </style>
</head>
<body>

<div class="header"><h1>DOK PREMIUM MASTER</h1></div>
<div class="status-bar" id="fiscal">AUDITANDO FROTA...</div>

<div class="tabs">
    <button class="tab-btn active" onclick="filtrar('TUDO', this)">TUDO (85)</button>
    <button class="tab-btn" onclick="filtrar('ENTRADA', this)">ENTRADAS</button>
    <button class="tab-btn" onclick="filtrar('PRATO', this)">PRATOS</button>
    <button class="tab-btn" onclick="filtrar('BAR', this)">BAR / ADEGA</button>
</div>

<div class="container" id="lista"></div>

<script>
    // 1. BANCO DE DADOS CENTRALIZADO (MATRIZ)
    const bancoDeDados = [
        {id: 1, cat: 'ENTRADA', n: 'Couvert da Casa', p: '35', d: 'Pães artesanais e caponata.'},
        {id: 2, cat: 'ENTRADA', n: 'Burrata ao Pesto ★', p: '78', d: 'Burrata fresca e pesto real.'},
        {id: 10, cat: 'ENTRADA', n: 'Tiras de Mignon', p: '98', d: 'Mignon acebolado e torradas.'},
        {id: 22, cat: 'PRATO', n: 'Carbonara Clássico', p: '89', d: 'Guanciale e gema fresca.'},
        {id: 29, cat: 'PRATO', n: 'Picadinho G. Torres', p: '98', d: 'Arroz, feijão, farofa e mignon.'},
        {id: 34, cat: 'PRATO', n: 'Arroz de Pato ★', p: '108', d: 'Pato desfiado e chouriço.'},
        {id: 70, cat: 'BAR', n: 'Cobos Malbec ★', p: '230', d: 'Vinho Tinto Argentino.'},
        {id: 72, cat: 'BAR', n: 'GT Hendricks', p: '65', d: 'Gin, tônica e pepino.'}
    ];

    const frotaFinal = [];

    // 2. O MOTOR "FOR" - BLINDAGEM ANTI-OMISSÃO
    function construirFrota() {
        for (let i = 1; i <= 85; i++) {
            // Tenta achar o item no banco de dados
            const itemExistente = bancoDeDados.find(item => item.id === i);
            
            if (itemExistente) {
                frotaFinal.push(itemExistente);
            } else {
                // Se não existir, o script cria um item de alerta (Anti-Vácuo)
                let catSugerida = (i <= 20) ? 'ENTRADA' : (i <= 60) ? 'PRATO' : 'BAR';
                frotaFinal.push({
                    id: i,
                    cat: catSugerida,
                    n: `<span class="vazio">PENDENTE ID ${i}</span>`,
                    p: '00',
                    d: 'Aguardando sincronização de nome.'
                });
            }
        }
    }

    // 3. RENDERIZAÇÃO E FILTRO
    function exibir(lista) {
        const container = document.getElementById('lista');
        const fiscal = document.getElementById('fiscal');
        
        fiscal.innerHTML = `✅ STATUS: 85/85 ITENS MAPEADOS (SEM VÁCUO)`;
        
        container.innerHTML = lista.map(i => `
            <div class="item-row">
                <div class="info">
                    <b>${i.id.toString().padStart(2, '0')}. ${i.n}</b>
                    <span>${i.d}</span>
                </div>
                <div class="price">R$ ${i.p}</div>
            </div>
        `).join('');
    }

    function filtrar(categoria, botao) {
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        botao.classList.add('active');
        
        if (categoria === 'TUDO') {
            exibir(frotaFinal);
        } else {
            const filtrados = frotaFinal.filter(item => item.cat === categoria);
            exibir(filtrados);
        }
        window.scrollTo(0, 0);
    }

    // DISPARO DO SISTEMA
    construirFrota();
    exibir(frotaFinal);

</script>
</body>
</html>
